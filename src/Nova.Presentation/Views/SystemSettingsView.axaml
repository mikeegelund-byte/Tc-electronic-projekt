<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Nova.Presentation.Views.SystemSettingsView"
             xmlns:vm="using:Nova.Presentation.ViewModels"
             x:DataType="vm:SystemSettingsViewModel"
             Background="{StaticResource BackgroundSecondary}"
             Foreground="{StaticResource TextPrimary}">
  
  <ScrollViewer>
    <StackPanel Margin="{StaticResource SpacingLarge}">
      <!-- Title -->
      <TextBlock Text="System Settings" 
                 FontSize="{StaticResource FontSizeXLarge}" 
                 FontWeight="{StaticResource FontWeightBold}"
                 Foreground="{StaticResource TextPrimary}"
                 Margin="0,0,0,20" />
      
      <!-- Settings Grid -->
      <Grid ColumnDefinitions="200,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto">
        
        <!-- MIDI Channel -->
        <TextBlock Grid.Row="0" Grid.Column="0" 
                   Text="MIDI Channel:" 
                   Foreground="{StaticResource TextSecondary}"
                   Margin="0,0,10,10" />
        <NumericUpDown Grid.Row="0" Grid.Column="1"
                       Value="{Binding MidiChannel}"
                       Minimum="0" Maximum="15"
                       Increment="1"
                       Margin="0,0,0,10"
                       MinWidth="80"
                       AutomationProperties.Name="MIDI channel"
                       ToolTip.Tip="MIDI channel (0-15)" />
        
        <!-- Device ID -->
        <TextBlock Grid.Row="1" Grid.Column="0" 
                   Text="Device ID:" 
                   Foreground="{StaticResource TextSecondary}"
                   Margin="0,0,10,10" />
        <NumericUpDown Grid.Row="1" Grid.Column="1"
                       Value="{Binding DeviceId}"
                       Minimum="0" Maximum="127"
                       Increment="1"
                       Margin="0,0,0,10"
                       MinWidth="80"
                       AutomationProperties.Name="Device ID"
                       ToolTip.Tip="Device identifier (0-127)" />
        
        <!-- MIDI Clock Enabled -->
        <TextBlock Grid.Row="2" Grid.Column="0" 
                   Text="MIDI Clock:" 
                   Foreground="{StaticResource TextSecondary}"
                   Margin="0,0,10,10" />
        <CheckBox Grid.Row="2" Grid.Column="1"
                  IsChecked="{Binding MidiClockEnabled}"
                  Content="Enabled"
                  Margin="0,0,0,10"
                  AutomationProperties.Name="MIDI clock" />
        
        <!-- MIDI Program Change Enabled -->
        <TextBlock Grid.Row="3" Grid.Column="0" 
                   Text="Program Change:" 
                   Foreground="{StaticResource TextSecondary}"
                   Margin="0,0,10,10" />
        <CheckBox Grid.Row="3" Grid.Column="1"
                  IsChecked="{Binding MidiProgramChangeEnabled}"
                  Content="Enabled"
                  Margin="0,0,0,10"
                  AutomationProperties.Name="Program change" />
        
        <!-- Version -->
        <TextBlock Grid.Row="4" Grid.Column="0" 
                   Text="Version:" 
                   Foreground="{StaticResource TextSecondary}"
                   Margin="0,0,10,0" />
        <TextBlock Grid.Row="4" Grid.Column="1" 
                   Text="{Binding Version}"
                   Foreground="{StaticResource TextPrimary}"
                   Background="{StaticResource BackgroundTertiary}"
                   Padding="8,4"
                   AutomationProperties.Name="Firmware version (read-only)"
                   ToolTip.Tip="Hardware firmware version" />
      </Grid>

      <!-- Action Buttons -->
      <StackPanel Orientation="Horizontal" 
                  Spacing="{StaticResource Spacing16}" 
                  Margin="0,20,0,0"
                  HorizontalAlignment="Left">
        <Button Content="Save to Pedal"
                Command="{Binding $parent[Window].((vm:MainViewModel)DataContext).SaveSystemSettingsCommand}"
                Padding="{StaticResource ButtonPadding}"
                Background="{StaticResource SuccessColor}"
                Foreground="{StaticResource TextPrimary}"
                AutomationProperties.Name="Save system settings to pedal"
                AutomationProperties.HelpText="Write settings to Nova System hardware" />
        
        <Button Content="Cancel"
                Command="{Binding $parent[Window].((vm:MainViewModel)DataContext).CancelSystemChangesCommand}"
                Padding="{StaticResource ButtonPadding}"
                AutomationProperties.Name="Cancel changes"
                AutomationProperties.HelpText="Discard unsaved changes" />
      </StackPanel>
    </StackPanel>
  </ScrollViewer>
  
</UserControl>

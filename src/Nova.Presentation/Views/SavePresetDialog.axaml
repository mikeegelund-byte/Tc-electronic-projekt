<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Nova.Presentation.Views.SavePresetDialog"
        Title="Save Preset to Hardware"
        MinWidth="400" MinHeight="250"
        Width="450"
        Height="280"
        WindowStartupLocation="CenterOwner"
        CanResize="True"
        Background="{StaticResource BackgroundSecondary}">

    <Border Padding="{StaticResource SpacingLarge}">
        <StackPanel Spacing="16">
            <!-- Title -->
            <TextBlock Text="Save Preset to Hardware"
                       FontSize="{StaticResource FontSizeXLarge}"
                       FontWeight="{StaticResource FontWeightBold}"
                       Foreground="{StaticResource TextPrimary}"/>

            <!-- Preset Name -->
            <StackPanel Spacing="4">
                <TextBlock Text="Preset Name:"
                           Foreground="{StaticResource TextSecondary}"/>
                <TextBox Name="PresetNameText"
                         Background="{StaticResource BackgroundPrimary}"
                         Foreground="{StaticResource TextPrimary}"
                         BorderBrush="{StaticResource BorderDefault}"
                         Height="36"
                         MaxLength="16"
                         Padding="{StaticResource InputPadding}"
                         AutomationProperties.Name="Preset name"
                         AutomationProperties.HelpText="Enter the name for this preset (maximum 16 characters)" />
                <TextBlock Name="ValidationError"
                           Text="Preset name is required (1-16 characters)"
                           Foreground="{StaticResource DangerColor}"
                           FontSize="{StaticResource FontSizeSmall}"
                           IsVisible="False"
                           AutomationProperties.LiveSetting="Assertive" />
            </StackPanel>

            <!-- Slot Selection -->
            <StackPanel Spacing="8">
                <TextBlock Text="Target Slot (1-60):"
                           Foreground="{StaticResource TextSecondary}"/>
                <ComboBox Name="SlotComboBox"
                          Background="{StaticResource BackgroundPrimary}"
                          Foreground="{StaticResource TextPrimary}"
                          BorderBrush="{StaticResource BorderDefault}"
                          Height="36"
                          HorizontalAlignment="Stretch"
                          AutomationProperties.Name="Target slot selection"
                          AutomationProperties.HelpText="Choose which slot (1-60) to save this preset to" />
            </StackPanel>

            <!-- Overwrite Warning -->
            <Border Name="OverwriteWarning"
                    Background="{StaticResource WarningBackground}"
                    Padding="{StaticResource SpacingMedium}"
                    CornerRadius="{StaticResource BorderRadiusMedium}"
                    IsVisible="False">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <PathIcon Width="18" Height="18" VerticalAlignment="Center"
                              Foreground="{StaticResource WarningColor}">
                        <PathIcon.Data>
                            <!-- Warning triangle icon -->
                            M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z
                        </PathIcon.Data>
                    </PathIcon>
                    <TextBlock Text="Warning: This will overwrite the existing preset in this slot!"
                               Foreground="{StaticResource TextPrimary}"
                               TextWrapping="Wrap"
                               VerticalAlignment="Center" />
                </StackPanel>
            </Border>

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                <Button Grid.Column="0"
                        Name="CancelButton"
                        Content="Cancel"
                        Background="{StaticResource BackgroundTertiary}"
                        Foreground="{StaticResource TextPrimary}"
                        Height="36"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        AutomationProperties.Name="Cancel"
                        AutomationProperties.HelpText="Close dialog without saving" />
                <Button Grid.Column="1"
                        Name="SaveButton"
                        Content="Save to Hardware"
                        Background="{StaticResource AccentPrimary}"
                        Foreground="{StaticResource TextPrimary}"
                        Height="36"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        AutomationProperties.Name="Save to hardware"
                        AutomationProperties.HelpText="Write preset to selected slot on Nova System pedal" />
            </Grid>
        </StackPanel>
    </Border>
</Window>

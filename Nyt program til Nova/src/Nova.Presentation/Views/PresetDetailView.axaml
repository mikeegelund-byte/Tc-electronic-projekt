<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Nova.Presentation.ViewModels"
             xmlns:converters="using:Nova.Presentation.Converters"
             x:Class="Nova.Presentation.Views.PresetDetailView"
             x:DataType="vm:PresetDetailViewModel">

    <UserControl.Resources>
        <converters:BoolToGreenGrayBrushConverter x:Key="BoolToGreenGrayBrushConverter"/>
    </UserControl.Resources>

    <Border Background="#2D2D2D" Padding="16" CornerRadius="8">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="16">
                <!-- Header Section -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Preset Details" 
                               FontWeight="Bold" 
                               FontSize="16"
                               Foreground="#FFFFFF"/>
                    
                    <StackPanel Spacing="4" IsVisible="{Binding HasPreset}">
                        <TextBlock FontSize="20" FontWeight="Bold" Foreground="#FFFFFF">
                            <Run Text="{Binding Position}"/> - <Run Text="{Binding PresetName}"/>
                        </TextBlock>
                        <TextBlock Text="{Binding PresetNumber, StringFormat='Preset #{0}'}" 
                                   Foreground="#AAAAAA"
                                   FontFamily="Consolas"/>
                    </StackPanel>
                    
                    <TextBlock Text="Select a preset from the list to view details"
                               IsVisible="{Binding !HasPreset}"
                               Foreground="#999999"
                               FontStyle="Italic"
                               Margin="0,8"/>
                </StackPanel>

                <!-- Global Parameters Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Global Parameters" 
                                   FontWeight="Bold" 
                                   Foreground="#FFFFFF"
                                   Margin="0,0,0,4"/>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Tap Tempo:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="0" Grid.Column="1" 
                                           Value="{Binding TapTempo}" 
                                           Minimum="0" Maximum="255" 
                                           Increment="1" FormatString="N0"
                                           Width="150" HorizontalAlignment="Left"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Routing:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="1" Grid.Column="1" 
                                           Value="{Binding Routing}" 
                                           Minimum="0" Maximum="7" 
                                           Increment="1" FormatString="N0"
                                           Width="150" HorizontalAlignment="Left"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Level Out Left:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="2" Grid.Column="1" 
                                           Value="{Binding LevelOutLeft}" 
                                           Minimum="-20" Maximum="20" 
                                           Increment="1" FormatString="N0"
                                           Suffix=" dB"
                                           Width="150" HorizontalAlignment="Left"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Level Out Right:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="3" Grid.Column="1" 
                                           Value="{Binding LevelOutRight}" 
                                           Minimum="-20" Maximum="20" 
                                           Increment="1" FormatString="N0"
                                           Suffix=" dB"
                                           Width="150" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Compressor Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Ellipse Width="12" Height="12" Fill="{Binding Compressor.IsEnabled, Converter={StaticResource BoolToGreenGrayBrushConverter}}"/>
                            <TextBlock Text="Compressor" FontWeight="Bold" Foreground="#FFFFFF"/>
                        </StackPanel>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Compressor.Type}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Drive:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="1" Grid.Column="1" 
                                           Value="{Binding Compressor.Drive}" 
                                           Minimum="1" Maximum="20" 
                                           Increment="1" FormatString="N0"
                                           Width="150" HorizontalAlignment="Left"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Level:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="2" Grid.Column="1" 
                                           Value="{Binding Compressor.Level}" 
                                           Minimum="-12" Maximum="12" 
                                           Increment="1" FormatString="N0"
                                           Suffix=" dB"
                                           Width="150" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Drive Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Ellipse Width="12" Height="12" Fill="{Binding Drive.IsEnabled, Converter={StaticResource BoolToGreenGrayBrushConverter}}"/>
                            <TextBlock Text="Drive" FontWeight="Bold" Foreground="#FFFFFF"/>
                        </StackPanel>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Drive.Type}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Gain:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="1" Grid.Column="1" 
                                           Value="{Binding Drive.Gain}" 
                                           Minimum="0" Maximum="100" 
                                           Increment="1" FormatString="N0"
                                           Width="150" HorizontalAlignment="Left"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Level:" Foreground="#AAAAAA"/>
                            <NumericUpDown Grid.Row="2" Grid.Column="1" 
                                           Value="{Binding Drive.Level}" 
                                           Minimum="-30" Maximum="20" 
                                           Increment="1" FormatString="N0"
                                           Suffix=" dB"
                                           Width="150" HorizontalAlignment="Left"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Modulation Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Ellipse Width="12" Height="12" Fill="{Binding Modulation.IsEnabled, Converter={StaticResource BoolToGreenGrayBrushConverter}}"/>
                            <TextBlock Text="Modulation" FontWeight="Bold" Foreground="#FFFFFF"/>
                        </StackPanel>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Modulation.Type}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Speed:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Modulation.Speed}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Depth:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Modulation.Depth, StringFormat='{}{0}%'}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Mix:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding Modulation.Mix, StringFormat='{}{0}%'}" Foreground="#FFFFFF"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Delay Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Ellipse Width="12" Height="12" Fill="{Binding Delay.IsEnabled, Converter={StaticResource BoolToGreenGrayBrushConverter}}"/>
                            <TextBlock Text="Delay" FontWeight="Bold" Foreground="#FFFFFF"/>
                        </StackPanel>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Delay.Type}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Time:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Delay.Time, StringFormat='{}{0} ms'}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Feedback:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Delay.Feedback, StringFormat='{}{0}%'}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Mix:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding Delay.Mix, StringFormat='{}{0}%'}" Foreground="#FFFFFF"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Reverb Section -->
                <Border Background="#1E1E1E" 
                        Padding="12" 
                        CornerRadius="4"
                        IsVisible="{Binding HasPreset}">
                    <StackPanel Spacing="8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Ellipse Width="12" Height="12" Fill="{Binding Reverb.IsEnabled, Converter={StaticResource BoolToGreenGrayBrushConverter}}"/>
                            <TextBlock Text="Reverb" FontWeight="Bold" Foreground="#FFFFFF"/>
                        </StackPanel>
                        <Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Reverb.Type}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Decay:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Reverb.Decay}" Foreground="#FFFFFF"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Level:" Foreground="#AAAAAA"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Reverb.Level, StringFormat='{}{0}%'}" Foreground="#FFFFFF"/>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Border>
</UserControl>
